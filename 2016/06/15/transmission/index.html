<!DOCTYPE html><html lang="zh-CN"><head><meta name="baidu-site-verification" content="WJEAqh4Drc" /><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="jverson's blog | java | web | Jverson"><title>网络分层结构之运输层（四） | 墨言</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">网络分层结构之运输层（四）</h1><a id="logo" href="/.">墨言</a><p class="description">LIFE IS SIMPLE, LOVE SMILE AND CODE</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="http://album.jverson.com/"><i class="fa fa-picture-o"> 相册</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">网络分层结构之运输层（四）</h1><div class="post-meta">Jun 15, 2016<span> | </span><span class="category"><a href="/categories/Coding/">Coding</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#运输层的端口"><span class="toc-number">1.</span> <span class="toc-text">运输层的端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UDP协议"><span class="toc-number">2.</span> <span class="toc-text">UDP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP介绍"><span class="toc-number">2.1.</span> <span class="toc-text">UDP介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java程序实现"><span class="toc-number">2.2.</span> <span class="toc-text">Java程序实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP协议"><span class="toc-number">3.</span> <span class="toc-text">TCP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP特点"><span class="toc-number">3.1.</span> <span class="toc-text">TCP特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP可靠传输原理"><span class="toc-number">3.2.</span> <span class="toc-text">TCP可靠传输原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP报文格式"><span class="toc-number">3.3.</span> <span class="toc-text">TCP报文格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java程序实现-1"><span class="toc-number">3.4.</span> <span class="toc-text">Java程序实现</span></a></li></ol></li></ol></div></div><div class="post-content"><p>我们平常所说的“两个主机之间通信”其实指的是两个主机之间的进程进行交换数据，即通信的真正终端不是主机而是主机中的进程。网络层的IP协议可以将数据包送到目的主机，但并未交付到具体的进程，而运输层则提供了应用进程之间的逻辑通信，同时还负责对收到的报文进行差错检查。<br><a id="more"></a></p>
<h2 id="运输层的端口"><a href="#运输层的端口" class="headerlink" title="运输层的端口"></a>运输层的端口</h2><p>协议端口号（简称端口）是运输层的概念，当网络层将数据包送达主机时必须能够知道其希望与主机的哪一个进程进行交互，而端口号即标识了具体的某一个进程，这个看上去和操作系统进程标识符的概念很类似（由于不同操作系统的标识符格式不同，在网络通信中使用端口号的概念）。但是这样的话我们在进行通信时还必须知道目的进程的端口号，而进程的创建和撤销都是动态的，这样对端口还需要一个类似dns的东西去获取目的port，显然是不可行的。因此运输层的端口号分为两类：</p>
<p><strong>1， 服务端使用的端口号（0~49151）</strong><br>服务端的端口号也分为两类：系统端口号和登记端口号。系统端口号范围是0~1023，是被IANA指派到一些特定应用的端口号，例如FTP是21，HTTP是80等。而登记端口号范围1024~49151，必须按照IANA规定程序登记方可使用。</p>
<p><strong>2， 客户端使用的端口号（49152~65535）</strong><br>这些端口号是客户端进程运行时动态选择临时使用，和服务端通信时，服务端将响应报文发回至客户端相应的临时端口号，通信结束后这个端口号可能就已经被别的客户端进程使用了。</p>
<h2 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h2><h3 id="UDP介绍"><a href="#UDP介绍" class="headerlink" title="UDP介绍"></a>UDP介绍</h3><p>UDP只在IP层的数据报上添加了很少的功能，包括端口信息和差错检测，UDP首部只有8个字节（TCP头部有20字节），下面是一个DNS请求的UDP头部。</p>
<blockquote>
<p>User Datagram Protocol, Src Port: 52719 (52719), Dst Port: 53 (53)<br>    Source Port: 52719  //源端口，需要对方回信时选用，不需要时可置零<br>    Destination Port: 53  //目的端口，DNS服务的熟知端口<br>    Length: 43  //UDP数据报长度，最小值为UDP头部长度8<br>    Checksum: 0xac97 [validation disabled]  //校验和，校验报文是否有错，有错便丢弃</p>
</blockquote>
<p>UDP协议具有以下特点</p>
<ul>
<li>无连接</li>
<li>不保证可靠交付</li>
<li>面向报文，即不管应用层交下来的报文长度多少，UDP只负责添加UDP报头就直接交给网络层了，不会进行报文的拆分或者合并</li>
<li>没有拥塞控制，网络拥塞不会是主机发送速率降低</li>
<li>支持一对一，一对多，多对一和多对多</li>
<li>首部8字节，开销小</li>
</ul>
<h3 id="Java程序实现"><a href="#Java程序实现" class="headerlink" title="Java程序实现"></a>Java程序实现</h3><p>Server端实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPServer</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SERVER_PORT = <span class="number">5000</span>;</div><div class="line">	<span class="keyword">private</span> DatagramSocket datagramSocket;</div><div class="line">	<span class="keyword">private</span> DatagramPacket datagramPacket;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">byte</span> recByte[];</div><div class="line">	<span class="keyword">private</span> String recString;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UDPServer</span><span class="params">()</span> </span>&#123;</div><div class="line">		init();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			datagramSocket = <span class="keyword">new</span> DatagramSocket(SERVER_PORT);  <span class="comment">//创建UDP套接字</span></div><div class="line">			recByte = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; </div><div class="line">			datagramPacket = <span class="keyword">new</span> DatagramPacket(recByte, recByte.length); <span class="comment">//用来接收UDP数据报的字节数组buf  </span></div><div class="line">			recString = <span class="string">""</span>;</div><div class="line">			<span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">			<span class="keyword">while</span> (i==<span class="number">0</span>) &#123;</div><div class="line">				System.out.println(<span class="string">"listening"</span>); </div><div class="line">				datagramSocket.receive(datagramPacket);  <span class="comment">//阻塞监听接收数据</span></div><div class="line">				i = datagramPacket.getLength();</div><div class="line">				<span class="keyword">if</span> (i&gt;<span class="number">0</span>) &#123;</div><div class="line">					recString = <span class="keyword">new</span> String(recByte, <span class="number">0</span>, datagramPacket.getLength());</div><div class="line">					System.out.println(<span class="string">"receive: "</span>+recString);  <span class="comment">//打印接收到的字符</span></div><div class="line">					i = <span class="number">0</span>;  <span class="comment">//继续监听接收</span></div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="keyword">new</span> UDPServer();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Client端实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UDPClient</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CLIENT_PORT = <span class="number">5001</span>;</div><div class="line">	<span class="keyword">private</span> DatagramSocket datagramSocket;</div><div class="line">	<span class="keyword">private</span> DatagramPacket datagramPacket;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">byte</span> sendByte[];</div><div class="line">	<span class="keyword">private</span> String sendString;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">UDPClient</span><span class="params">()</span> </span>&#123;</div><div class="line">		Init();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			datagramSocket = <span class="keyword">new</span> DatagramSocket(CLIENT_PORT); <span class="comment">//创建UDP套接字</span></div><div class="line">			sendByte = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">			sendString = <span class="string">"hello server, I am client!"</span>;</div><div class="line">			sendByte = sendString.getBytes();</div><div class="line">			datagramPacket = <span class="keyword">new</span> DatagramPacket(sendByte, sendByte.length, InetAddress.getLocalHost(), <span class="number">5000</span>); <span class="comment">//创建发送UDP报文</span></div><div class="line">			datagramSocket.send(datagramPacket); <span class="comment">//将length长的buf数据发送到指定的地址的端口号处</span></div><div class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="keyword">new</span> UDPClient();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h2><h3 id="TCP特点"><a href="#TCP特点" class="headerlink" title="TCP特点"></a>TCP特点</h3><ul>
<li>面向连接，类似于打电话，先接通再说话，通话完需要挂断，释放连接</li>
<li>只能点对点</li>
<li>提供可靠交付，接收数据无差错、不丢失、不重复并按序到达</li>
<li>全双工</li>
<li>面向字节流</li>
</ul>
<p><strong>其中关于面向字节流的理解：</strong><br>应用程序和TCP的交互以数据块（大小不等）为单位，并且发送进程和接收进程的数据块大小也没有对应关系。TCP只把应用程序交下来的数据看做一连串无结构的字节流，TCP并不关心应用程序每次把多长的报文发送至TCP缓存，而是根据对方给出的窗口值和当前网络拥塞的程度决定一个传输的报文段包含多少字节（注意和UDP区别，应用进程给出的数据块多长UDP报文就多长），如果应用进程TCP缓存的数据块太长，TCP会分段传送，如果太短，TCP则等待积累足够多的字节再传。</p>
<h3 id="TCP可靠传输原理"><a href="#TCP可靠传输原理" class="headerlink" title="TCP可靠传输原理"></a>TCP可靠传输原理</h3><p><strong>1，停止等待协议</strong><br>TCP每发送完一个分组便停止发送，直到对方确认正确接收。如果长时间没有收到确认则重新发送分组（超时重传）。</p>
<p><strong>2，连续ARQ协议&amp;滑动窗口协议</strong><br>停止等待协议一个显著的确定就是信道利用率低，可以连续的发用一个特定长度的分组，依次等待确认，每收到一个确认，发送窗口向前滑动一个分组的位置，这样信道利用率就提高了。而接收方也不是每收到一个分组就发一个确认，而是对按序到达的最后一个分组进行确认，表明到这个分组位置的所有分组都接收成功了。</p>
<p><strong>3，流量控制</strong><br>即让发送方的发送速率不能太快，要让接收方来的及接收。而这也是通过滑动窗口机制来实现的，只需规定发送方的发送窗口不能超过接收方给出的接收窗口的数值。</p>
<h3 id="TCP报文格式"><a href="#TCP报文格式" class="headerlink" title="TCP报文格式"></a>TCP报文格式</h3><p>下面是Wireshark截取的一段TCP头部，其中前20字节是固定的，后面还有一个4n字节的选项字段（Options），因此TCP首部的最小长度是20字节。</p>
<blockquote>
<p>Frame 52: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0<br>Ethernet II, Src: Hangzhou_4a:7d:df (70:f9:6d:4a:7d:df), Dst: Dell_6b:3d:e5 (b0:83:fe:6b:3d:e5)<br>Internet Protocol Version 4, Src: 172.20.39.7, Dst: 10.13.153.44<br>Transmission Control Protocol, Src Port: 80 (80), Dst Port: 19383 (19383), Seq: 0, Ack: 1, Len: 0<br>    Source Port: 80  //2字节<br>    Destination Port: 19383  //2字节<br>    Sequence number: 0    (relative sequence number)  //序号 4字节 TCP传送的字节流中的每一个字节都按顺序编号<br>    Acknowledgment number: 1    (relative ack number)  //确认号 4字节 期望收到对方下一个报文段第一个字节的序号<br>    Header Length: 32 bytes //<br>    Flags: 0x012 (SYN, ACK)<br>    Window size value: 14600  //窗口 2字节 指发送报文一方的接收窗口<br>    Checksum: 0xc07d [validation disabled]  //校验和 2字节 检验数据是否完整无误<br>    Urgent pointer: 0  //紧急指针 2字节 为1时有效，指明报文段中紧急字段的字节数<br>    Options: (12 bytes), Maximum segment size, No-Operation (NOP), No-Operation (NOP), SACK permitted, No-Operation (NOP), Window scale  //选项，最长40字节，没有时TCP头部即为20字节</p>
</blockquote>
<h3 id="Java程序实现-1"><a href="#Java程序实现-1" class="headerlink" title="Java程序实现"></a>Java程序实现</h3><p>Server端实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SERVER_PORT = <span class="number">5000</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(SERVER_PORT);</div><div class="line">		<span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</div><div class="line">			Socket socket = serverSocket.accept(); <span class="comment">//使用accept()阻塞等待客户请求，有客户请求到来则产生一个Socket对象，并继续执行</span></div><div class="line">			SocketAddress clientAddress = socket.getRemoteSocketAddress();  </div><div class="line">	        System.out.println(<span class="string">"Handling client at "</span> + clientAddress); <span class="comment">//打印客户端ip</span></div><div class="line">	        </div><div class="line">			BufferedReader is = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</div><div class="line">			System.out.println(<span class="string">"recieve: "</span> + is.readLine()); <span class="comment">//打印客户端传输的内容</span></div><div class="line">			</div><div class="line">			OutputStream out = socket.getOutputStream(); </div><div class="line">			out.write(<span class="string">"hello, I am server."</span>.getBytes()); <span class="comment">//向客户端返回内容</span></div><div class="line">			</div><div class="line">			socket.close(); <span class="comment">//通信完成，关闭客户端socket连接</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">		e.printStackTrace();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Client端实现<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SERVER_PORT = <span class="number">5000</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>, SERVER_PORT);</div><div class="line">		System.out.println(<span class="string">"Connected to server ..... Sending echo String"</span>);  </div><div class="line">		</div><div class="line">		InputStream in = socket.getInputStream();  </div><div class="line">        OutputStream out = socket.getOutputStream();  </div><div class="line">        <span class="keyword">byte</span>[] data = <span class="string">"hello, I am Jverson."</span>.getBytes();</div><div class="line">        out.write(data);</div><div class="line">        </div><div class="line">        <span class="keyword">int</span> totalBytesLength  = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> bytesRcvd; </div><div class="line">        <span class="keyword">while</span> (totalBytesLength &lt; data.length) &#123;</div><div class="line">        	<span class="keyword">if</span> ((bytesRcvd = in.read(data, totalBytesLength, data.length  </div><div class="line">                    - totalBytesLength)) == -<span class="number">1</span>)  </div><div class="line">            &#123;  </div><div class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> SocketException(<span class="string">"Connection closed prematurely"</span>);  </div><div class="line">            &#125;  </div><div class="line">              </div><div class="line">            totalBytesLength += bytesRcvd;</div><div class="line">		&#125;</div><div class="line">        </div><div class="line">        System.out.println(<span class="string">"Received:"</span>+<span class="keyword">new</span> String(data));</div><div class="line">		</div><div class="line">		socket.close();  </div><div class="line">	&#125; <span class="keyword">catch</span> (UnknownHostException e) &#123;</div><div class="line">		e.printStackTrace();</div><div class="line">	&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">		e.printStackTrace();</div><div class="line">	&#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.1" async></script><a data-url="http://jverson.com/2016/06/15/transmission/" data-id="cj2rp3kvp003ne0ynsfdqeiag" class="article-share-link">分享到</a><div class="tags"><a href="/tags/network/">network</a><a href="/tags/网络/">网络</a></div><div class="post-nav"><a href="/2016/06/02/email/" class="pre">打造自己的专属邮箱服务</a><a href="/2016/08/30/autohotkey-markdown-uploadImage/" class="next">AutoHotkey&amp;qshell实现图片一键上传七牛并返回markdown引用</a></div><div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div><script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script><script>var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "f6ab0f69594c4ca685224fc3908ec771",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);</script></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><a href="http://jverson.com/"><img src="http://ochyazsr6.bkt.clouddn.com/201610131152_383.jpg" alt="" border="0" style="margin-top:15px; border-radius: 300px;" width="180px"; height="180px"; ></a></div><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://jverson.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Thinking/">Thinking</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Travelling/">Travelling</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/并发/" style="font-size: 15px;">并发</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/GitHub/" style="font-size: 15px;">GitHub</a> <a href="/tags/Memory/" style="font-size: 15px;">Memory</a> <a href="/tags/Cache/" style="font-size: 15px;">Cache</a> <a href="/tags/Alfred-Markdown/" style="font-size: 15px;">Alfred Markdown</a> <a href="/tags/AutoHotkey/" style="font-size: 15px;">AutoHotkey</a> <a href="/tags/Concurrent/" style="font-size: 15px;">Concurrent</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Blog/" style="font-size: 15px;">Blog</a> <a href="/tags/Frontend/" style="font-size: 15px;">Frontend</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/Travelling/" style="font-size: 15px;">Travelling</a> <a href="/tags/Https/" style="font-size: 15px;">Https</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/Summary/" style="font-size: 15px;">Summary</a> <a href="/tags/网络/" style="font-size: 15px;">网络</a> <a href="/tags/Cookie/" style="font-size: 15px;">Cookie</a> <a href="/tags/Session/" style="font-size: 15px;">Session</a> <a href="/tags/Http/" style="font-size: 15px;">Http</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-bar-chart"> 访客统计</i></div><a href="http://s05.flagcounter.com/more/quj"><img src="http://s05.flagcounter.com/count2/quj/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_10/viewers_0/labels_1/pageviews_1/flags_0/percent_0/" alt="Since 2016.04.28" border="0" style="margin-top:15px;"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">墨言.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" href="http://jverson.com"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.1"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body><script src="/js/gentie.js"></script></html>