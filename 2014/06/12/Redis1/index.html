<!DOCTYPE html><html lang="zh-CN"><head><meta name="baidu-site-verification" content="WJEAqh4Drc" /><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="jverson's blog | java | web | Jverson"><title>Redis几种数据结构的基本操作 | 墨言</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Redis几种数据结构的基本操作</h1><a id="logo" href="/.">墨言</a><p class="description">LIFE IS SIMPLE, LOVE SMILE AND CODE</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/instagram/"><i class="fa fa-picture-o"> 相册</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Redis几种数据结构的基本操作</h1><div class="post-meta">Jun 12, 2014<span> | </span><span class="category"><a href="/categories/Coding/">Coding</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>Redis的命令总是很难记，每次用到都去网上查一下，最近得空整理一下，一方面加深印象，另一方面再用的时候也方便查阅。<a id="more"></a> </p>
<p><em>参考：</em></p>
<ol>
<li><a href="http://redisdoc.com/" target="_blank" rel="external">Redis 命令参考-中文版</a></li>
<li><a href="http://redis.io/commands" target="_blank" rel="external"> Redis Command Reference</a></li>
<li><a href="http://redis.io/documentation" target="_blank" rel="external">Redis Documentation</a></li>
</ol>
<h3 id="set的基本操作"><a href="#set的基本操作" class="headerlink" title="set的基本操作"></a>set的基本操作</h3><p><a href="#setadd">添加</a>   <a href="#setsee">查询</a>     <a href="#setdel">删除</a>    <a href="#setrelation">集合关系操作</a></p>
<h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a><span id="setadd">添加数据</span></h4><blockquote>
<p>sadd key  value1 value2 value3…</p>
</blockquote>
<pre><code>dev:0&gt;sadd test:set:01 &quot;hello&quot;
1     //1表示成功插入一条数据
dev:0&gt;sadd test:set:01 &quot;redis&quot;
1
dev:0&gt;sadd test:set:01 &quot;hello&quot; &quot;world&quot;
1     //这里我虽然一次插入两个value，但是返回1，因为&quot;hello&quot;已存在
dev:0&gt;smembers test:set:01   //查看该key下的value分布：smembers key（see members）
&quot;world&quot;
&quot;redis&quot;
&quot;hello&quot;
</code></pre><h4 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a><span id="setsee">查询数据</span></h4><ul>
<li>获取set指定key的所有member</li>
</ul>
<blockquote>
<p>smembers key   //abbr. of “see members”</p>
</blockquote>
<pre><code>dev:0&gt;smembers test:set:01
&quot;world&quot;
&quot;redis&quot;
&quot;hello&quot;
</code></pre><ul>
<li>判断值是否是set的member。如果值是返回1，否则返回0</li>
</ul>
<blockquote>
<p>sismember key member  //abbr. of “see is member”</p>
</blockquote>
<pre><code>dev:0&gt;sismember test:set:01 &quot;hello&quot;
1
dev:0&gt;sismember test:set:01 &quot;hi&quot;
0
</code></pre><ul>
<li>返回set的member个数，如果set不存在，返回0</li>
</ul>
<blockquote>
<p>scard key</p>
</blockquote>
<pre><code>dev:0&gt;smembers test:set:01
&quot;hell&quot;
&quot;world&quot;
&quot;hello&quot;
&quot;redis&quot;
&quot;worl&quot;
dev:0&gt;scard test:set:01
5
</code></pre><ul>
<li>从set中返回一个随机member</li>
</ul>
<blockquote>
<p>srandmember key  //abbr. of “see random member”，随机抽奖</p>
</blockquote>
<pre><code>dev:0&gt;srandmember test:set:01
&quot;world&quot;
</code></pre><h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a><span id="setdel">删除数据</span></h4><ul>
<li>随机删除指定key的一个value</li>
</ul>
<blockquote>
<p>spop key   //set pop</p>
</blockquote>
<pre><code>dev:0&gt;spop test:set:01
&quot;redis&quot;
dev:0&gt;smembers test:set:01
&quot;world&quot;
&quot;hello&quot;
&quot;worl&quot;
&quot;hell&quot;
</code></pre><ul>
<li>删除指定key的指定value</li>
</ul>
<blockquote>
<p>srem key member [member …] </p>
</blockquote>
<pre><code>dev:0&gt;srem test:set:01 &quot;hell&quot; 1
dev:0&gt;smembers test:set:01
&quot;world&quot;
&quot;hello&quot;
&quot;worl&quot;
</code></pre><ul>
<li>将source key中的members移动到destination key中</li>
</ul>
<blockquote>
<p>smove source_key destination_key member</p>
</blockquote>
<pre><code>dev:0&gt;smembers test:set:01
&quot;world&quot;
&quot;hello&quot;
&quot;worl&quot;
dev:0&gt;smembers test:set:001
&quot;world&quot;
&quot;redis&quot;
&quot;hi&quot;
dev:0&gt;smove test:set:01 test:set:001 &quot;hello&quot;
1
dev:0&gt;smembers test:set:001
&quot;world&quot;
&quot;hello&quot;
&quot;redis&quot;
&quot;hi&quot;
dev:0&gt;smembers test:set:01
&quot;world&quot;
&quot;worl&quot;
</code></pre><h4 id="集合关系操作"><a href="#集合关系操作" class="headerlink" title="集合关系操作"></a><span id="setrelation">集合关系操作</span></h4><ul>
<li>多个set的并集</li>
</ul>
<blockquote>
<p>sunion key1 key2 key3…  //注意只是求并集，并没有将其存储</p>
</blockquote>
<pre><code>dev:0&gt;smembers set2
&quot;ache&quot;
&quot;ello&quot;
&quot;edis&quot;
&quot;orld&quot;
dev:0&gt;smembers set1
&quot;world&quot;
&quot;cache&quot;
&quot;redis&quot;
&quot;hello&quot;
dev:0&gt;sunion set1 set2
&quot;world&quot;
&quot;cache&quot;
&quot;redis&quot;
&quot;hello&quot;
&quot;orld&quot;
&quot;edis&quot;
&quot;ello&quot;
&quot;ache&quot;
</code></pre><ul>
<li>求并集并将结果存储到set</li>
</ul>
<blockquote>
<p>sunionstore destination key [key …]</p>
</blockquote>
<pre><code>dev:0&gt;smembers set1
&quot;world&quot;
&quot;redis&quot;
dev:0&gt;smembers set2
&quot;ache&quot;
&quot;orld&quot;
dev:0&gt;sunionstore all set1 set2
4
dev:0&gt;smembers all
&quot;world&quot;
&quot;ache&quot;
&quot;redis&quot;
&quot;orld&quot;
</code></pre><ul>
<li>多个set求交集</li>
</ul>
<blockquote>
<p>sinter key[key…]<br>sinterstore destination key [key …] </p>
</blockquote>
<pre><code>dev:0&gt;smembers set1
&quot;world&quot;
&quot;redis&quot;
dev:0&gt;smembers set2
&quot;redis&quot;
&quot;ache&quot;
dev:0&gt;sinter set1 set2
&quot;redis&quot;
</code></pre><ul>
<li>set中在其他set中不存在member</li>
</ul>
<blockquote>
<p> sdiff key[key …]<br> sdiffstore destination key[key…]</p>
</blockquote>
<pre><code>dev:0&gt;smembers set1
&quot;world&quot;
&quot;redis&quot;
dev:0&gt;smembers set2
&quot;redis&quot;
&quot;ache&quot;
dev:0&gt;sdiff set1 set2
&quot;world&quot;
</code></pre><h3 id="sorted-set的基本操作"><a href="#sorted-set的基本操作" class="headerlink" title="sorted set的基本操作"></a>sorted set的基本操作</h3><p><a href="#zsetadd">添加</a>   <a href="#zsetsee">查询</a>   <a href="#zsetupdate">更新</a>    <a href="#zsetdel">删除</a>    <a href="#setrelation">集合关系操作</a></p>
<h4 id="添加-查询数据"><a href="#添加-查询数据" class="headerlink" title="添加/查询数据"></a><span id="zsetadd">添加/查询数据</span></h4><blockquote>
<p>zadd key score member [[score member] [score member] …]</p>
</blockquote>
<pre><code>local:0&gt;zadd zset:set1 111 redis  
local:0&gt;zadd zset:set1 110 hello
local:0&gt;zrange zset:set1 0 -1  
hello  
redis
</code></pre><h4 id="查询数据-1"><a href="#查询数据-1" class="headerlink" title="查询数据"></a><span id="zsetsee">查询数据</span></h4><blockquote>
<p>语法：zrange key start stop [withscores]<br>解释：返回有序集key中指定范围[通过索引 start stop]的member[及其score]；</p>
</blockquote>
<pre><code>local:0&gt;zrange zset:set1 0 -1  
hello  
redis
local:0&gt;zrange zset:set1 0 -1 withscores 
hello   
110
redis
111
</code></pre><p><strong>注意：</strong>返回数据自动按照score排序，start参数0表示第一个元素开始；stop参数-1表示至最后一个元素，-2表示至倒数第二个元素</p>
<blockquote>
<p>语法： zcount key min max<br>解释：统计key中score值介于min 和max之间的member个数</p>
</blockquote>
<pre><code>local:0&gt;zrange zset:set1 0 -1 withscores
hello
110
redis
111
local:0&gt;zcount zset:set1 0 200
2
local:0&gt;zcount zset:set1 0 110
1
</code></pre><blockquote>
<p>语法：zscore key member<br>解释：返回有续集key中member的score</p>
</blockquote>
<pre><code>local:0&gt;zscore zset:set1 hello
110
</code></pre><blockquote>
<p>语法：zrevrange key start stop [withscores]<br>解释：根据score按降序排列返回有续集key中指定范围[通过索引start stop]的member[及score]</p>
</blockquote>
<pre><code>local:0&gt;zrevrange zset:set1 0 -1 withscores
redis
111
hello
110
</code></pre><blockquote>
<p>语法：zrangebyscore key min max [withscores] [limit offset count]<br>解释：返回有续集key中，score大于等于min并且小于等于max的member。返回结果按照score递增的次序排列。可选参数limit<br>指定返回结果的数量区间。</p>
</blockquote>
<pre><code>local:0&gt;zrange zset:set1 0 -1 withscores
world
50
hello
110
redis
111
local:0&gt;zrangebyscore zset:set1 0 200 limit 0 2
world
hello
</code></pre><p><strong>注意：</strong> zrevrangebyscore参数同理返回倒序排列的指定数据</p>
<blockquote>
<p>语法：zrevrank key member<br>解释：根据score从高到低排序，返回member在有序集key中的index</p>
</blockquote>
<pre><code>local:0&gt;zrange zset:set1 0 -1
world
hello
redis
local:0&gt;zrank zset:set1 redis
2
</code></pre><blockquote>
<p>语法：zcard key<br>解释：返回有续集key的基数</p>
</blockquote>
<p>local:0&gt;zcard zset:set1<br>3</p>
<h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a><span id="zsetupdate">更新数据</span></h4><blockquote>
<p>语法：zincrby key increment member<br>解释：有续集key的member增加增量increment，返回增加后的score</p>
</blockquote>
<pre><code>local:0&gt;zscore zset:set1 redis
111
local:0&gt;zincrby zset:set1 500 redis
611
local:0&gt;zscore zset:set1 redis
611
</code></pre><h4 id="更新数据-1"><a href="#更新数据-1" class="headerlink" title="更新数据"></a><span id="zsetdel">更新数据</span></h4><blockquote>
<p>语法：zrem key member [member …]<br>解释：移除有续集中的一个或多个member，返回移除member的个数</p>
</blockquote>
<pre><code>local:0&gt;zrem zset:set1 world
1
local:0&gt;zrange zset:set1 0 -1
hello
redis
</code></pre><blockquote>
<p>语法：zremrangebyrank key start stop<br>解释：移除有续集中指定排名范围[start stop]的元素，返回移除元素个数</p>
</blockquote>
<pre><code>redis 127.0.0.1:6379&gt; zrange score 0 -1
1) &quot;zhangsan&quot;
2) &quot;lisi&quot;
3) &quot;wangwu&quot;
4) &quot;liuli&quot;
redis 127.0.0.1:6379&gt; zremrangebyrank score 0 1
(integer) 2
redis 127.0.0.1:6379&gt; zrange score 0 -1
1) &quot;wangwu&quot;
2) &quot;liuli&quot;
</code></pre><blockquote>
<p>语法：zremrangebyscore key min max<br>解释：移除有续集中的member，移除member的score大于等于min小于等于max；返回移除元素个数</p>
</blockquote>
<pre><code>redis 127.0.0.1:6379&gt; zrange score 0 -1 withscores
1) &quot;wangwu&quot;
2) &quot;249&quot;
3) &quot;liuli&quot;
4) &quot;400&quot;
redis 127.0.0.1:6379&gt; zremrangebyscore score 248 250
(integer) 1
redis 127.0.0.1:6379&gt; zrange score 0 -1 withscores
1) &quot;liuli&quot;
2) &quot;400&quot;
</code></pre><p><br><br>String、Hash以及List未完待续。。。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.1" async></script><a data-url="http://jverson.com/2014/06/12/Redis1/" data-id="cj2eghekl000g42ynd6x6jh1l" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Redis/">Redis</a></div><div class="post-nav"><a href="/2014/05/23/List-Circle/" class="pre">单链表中有环的相关问题</a><a href="/2014/07/30/quebec/" class="next">A wonderful trip to Québec, Canada</a></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><a href="http://jverson.com/"><img src="http://ochyazsr6.bkt.clouddn.com/201610131152_383.jpg" alt="" border="0" style="margin-top:15px; border-radius: 300px;" width="180px"; height="180px"; ></a></div><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://jverson.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Thinking/">Thinking</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Travelling/">Travelling</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Blog/" style="font-size: 15px;">Blog</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/GitHub/" style="font-size: 15px;">GitHub</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/Cache/" style="font-size: 15px;">Cache</a> <a href="/tags/Alfred-Markdown/" style="font-size: 15px;">Alfred Markdown</a> <a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/AutoHotkey/" style="font-size: 15px;">AutoHotkey</a> <a href="/tags/Concurrent/" style="font-size: 15px;">Concurrent</a> <a href="/tags/并发/" style="font-size: 15px;">并发</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Frontend/" style="font-size: 15px;">Frontend</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/Travelling/" style="font-size: 15px;">Travelling</a> <a href="/tags/Https/" style="font-size: 15px;">Https</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/Calligraphy/" style="font-size: 15px;">Calligraphy</a> <a href="/tags/Summary/" style="font-size: 15px;">Summary</a> <a href="/tags/Memory/" style="font-size: 15px;">Memory</a> <a href="/tags/网络/" style="font-size: 15px;">网络</a> <a href="/tags/Cookie/" style="font-size: 15px;">Cookie</a> <a href="/tags/Session/" style="font-size: 15px;">Session</a> <a href="/tags/Http/" style="font-size: 15px;">Http</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-bar-chart"> 访客统计</i></div><a href="http://s05.flagcounter.com/more/quj"><img src="http://s05.flagcounter.com/count2/quj/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_10/viewers_0/labels_1/pageviews_1/flags_0/percent_0/" alt="Since 2016.04.28" border="0" style="margin-top:15px;"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">墨言.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" href="http://jverson.com"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div><script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script><script>var cloudTieConfig = {
url: document.location.href,
sourceId: "",
productKey: "f6ab0f69594c4ca685224fc3908ec771",
target: "cloud-tie-wrapper"
};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);</script></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.1"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>