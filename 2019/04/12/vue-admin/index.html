<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta name="baidu-site-verification" content="WJEAqh4Drc"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="jverson's blog | java | web | Jverson"><title>关于 Vue 的一些总结 | 墨言</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">关于 Vue 的一些总结</h1><a id="logo" href="/.">墨言</a><p class="description">LIFE IS SIMPLE, LOVE SMILE AND CODE</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="http://album.jverson.com/"><i class="fa fa-picture-o"> 相册</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">关于 Vue 的一些总结</h1><div class="post-meta">Apr 12, 2019<span> | </span><span class="category"><a href="/categories/Coding/">Coding</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2019/04/12/vue-admin/" href="/2019/04/12/vue-admin/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>最近使用 Vue 对项目中涉及的各种历史悠久的、基于不同陈旧技术栈的的运营后台进行了彻底重构，简单记录一下过程中一些总结。</p>
<a id="more"></a>
<p>当前团队负责的几个运营后台都是很久以前开发的，历史原因前端部分技术栈很混乱，部分是 JSP 写的，还有 Velocity 和 Freemarker 的，甚至还有一个 php 的，维护起来实在是头疼。于是这次借着组件化的计划，我们对后台系统也来个“组件化”重构。由于团队目前并没有专职前端开发同学，鉴于之前做冰箱购物时接触过 Vue 有一定了解以及参加马拉松时写过微信小程序，因此在我的大力推销下团队成员一致赞成使用 Vue 进行前后端分离重构。</p>
<p>本次重构基于一个 Vue 的 Admin 框架<a href="https://panjiachen.gitee.io/vue-element-admin-site/zh/" target="_blank" rel="noopener">vue-element-admin</a>，其中用到了 Vue 生态及相关的一些组件如下：</p>
<ul>
<li><a href="https://cn.vuejs.org/index.html" target="_blank" rel="noopener">vue</a></li>
<li><a href="https://vuex.vuejs.org/zh-cn/" target="_blank" rel="noopener">vuex</a></li>
<li><a href="https://router.vuejs.org/zh-cn/" target="_blank" rel="noopener">vue-router</a></li>
<li><a href="https://github.com/vuejs/vue-cli" target="_blank" rel="noopener">vue-cli</a></li>
<li><a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a></li>
<li><a href="https://github.com/ElemeFE/element" target="_blank" rel="noopener">element-ui</a></li>
<li><a href="https://github.com/nuysoft/Mock/wiki" target="_blank" rel="noopener">Mock.js</a></li>
</ul>
<p>具体的实现就不细讲了，中间也遇到了一些坑，前端基础不扎实的话在有些细节上就会花费更多的时间，不过最后还是按时顺利上线，和之前完全不同风格的 UI 和交互细节也得到了大家的认可。</p>
<h2 id="单个组件-页面中覆盖-element-样式"><a href="#单个组件-页面中覆盖-element-样式" class="headerlink" title="单个组件/页面中覆盖 element 样式"></a>单个组件/页面中覆盖 element 样式</h2><p>可以参考 <a href="https://panjiachen.github.io/vue-element-admin-site/zh/guide/essentials/style.html#%E8%87%AA%E5%AE%9A%E4%B9%89-element-ui-%E6%A0%B7%E5%BC%8F" target="_blank" rel="noopener">自定义 element-ui 样式</a>，根据实践最佳方式是在 scope 作用域下通过定义一个父 class，然后使用深度选择器进行样式定制即可，类似这样</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.demo-form-inline &gt;&gt;&gt; .el-input-group__prepend &#123;</span><br><span class="line">  width: 125px;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="全局-filter"><a href="#全局-filter" class="headerlink" title="全局 filter"></a>全局 filter</h2><p>vue 的 <a href="https://cn.vuejs.org/v2/guide/filters.html#ad" target="_blank" rel="noopener">过滤器</a> 用起来很方便，如果多个页面公用的过滤器可以抽取到单个js文件中全局注册，这样在组件中使用的时候直接用即可</p>
<p>filters.js<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> statusFilter = <span class="function">(<span class="params">status</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> statusMap = &#123;</span><br><span class="line">    <span class="string">'1'</span>: <span class="string">'success'</span>,</span><br><span class="line">    <span class="string">'2'</span>: <span class="string">'info'</span>,</span><br><span class="line">    <span class="string">'0'</span>: <span class="string">'info'</span>,</span><br><span class="line">    <span class="string">'-1'</span>: <span class="string">'danger'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> statusMap[status]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> statusShowFilter = <span class="function">(<span class="params">status</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> statusMap = &#123;</span><br><span class="line">    <span class="string">'1'</span>: <span class="string">'Passed'</span>,</span><br><span class="line">    <span class="string">'2'</span>: <span class="string">'Auditing'</span>,</span><br><span class="line">    <span class="string">'-1'</span>: <span class="string">'Deleted'</span>,</span><br><span class="line">    <span class="string">'0'</span>: <span class="string">'None'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> statusMap[status]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后在 main.js 中引入全局注册即可，注意这里注册 filters 一定要在初始化 vue 之前</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> filters <span class="keyword">from</span> <span class="string">'@/utils/filters'</span></span><br><span class="line"><span class="built_in">Object</span>.keys(filters).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">    Vue.filter(key, filters[key])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="js-模块化概念"><a href="#js-模块化概念" class="headerlink" title="js 模块化概念"></a>js 模块化概念</h2><p>理解 vuejs 文档中的 <a href="https://cn.vuejs.org/v2/guide/installation.html#%E5%AF%B9%E4%B8%8D%E5%90%8C%E6%9E%84%E5%BB%BA%E7%89%88%E6%9C%AC%E7%9A%84%E8%A7%A3%E9%87%8A" target="_blank" rel="noopener">对不同构建版本的解释</a> 可以参考这篇文章：<a href="https://qwqaq.com/b8fd304a.html" target="_blank" rel="noopener">JS 模块化规范：CommonJS, AMD, CMD, UMD, ESM</a></p>
<h2 id="awesome-vue"><a href="#awesome-vue" class="headerlink" title="awesome-vue"></a>awesome-vue</h2><p><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener">awesome-vue</a> 是官方整理的 vue 相关的一些资源，包括 ui 库、各种工具、模板等等</p>
<h2 id="vue-app-部署至-github-pages"><a href="#vue-app-部署至-github-pages" class="headerlink" title="vue app 部署至 github pages"></a>vue app 部署至 github pages</h2><p>具体部署步骤可以参考 <a href="https://cli.vuejs.org/zh/guide/deployment.html#github-pages" target="_blank" rel="noopener">vue-cli 官方文档</a>，demo 参考 <a href="https://github.com/jiwenxing/vue-element-admin" target="_blank" rel="noopener">my-vue-admin</a><br>注意：需要将打包路径由 dist 改为 docs（github 只支持这个目录），另外还可以将 dist 目录初始化为一个仓库推送到 github，直接使用 master 分支部署应用也可以，这样就如同 hexo 一样，源码和博客文件放置在不同仓库</p>
<p>后续会考虑找时间结合 mockjs 基于 vue-admin 二次开发做一个 JD 风格的 Admin 组件库，不过可能也只是想想而已。。。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.1" async></script><a data-url="https://jverson.com/2019/04/12/vue-admin/" data-id="ck0uslimf00016qfy8nxh6ob0" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Frontend/">Frontend</a></div><div class="post-nav"><a href="/2019/02/20/behavior_parameterization/" class="next">行为参数化 -  JDK8 Lambda 实现</a></div><div id="disqus_thread"><script>var disqus_shortname = 'jverson';
var disqus_identifier = '2019/04/12/vue-admin/';
var disqus_title = '关于 Vue 的一些总结';
var disqus_url = 'https://jverson.com/2019/04/12/vue-admin/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//jverson.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><a href="https://jverson.com/"><img src="https://wx4.sinaimg.cn/mw1024/74993f9ely1fuptmctad9j20cg0cg40p.jpg" alt border="0" style="margin-top:15px; border-radius: 300px;" width="180px" ; height="180px"></a></div><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://jverson.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-book"> 笔记</i></div><ul></ul><a href="https://jverson.com/ai/" title="AI" target="_blank">AI</a><ul></ul><a href="https://jverson.com/thinking-in-java/" title="Thinking in Java" target="_blank">Thinking in Java</a><ul></ul><a href="https://jverson.com/spring-boot-demo/" title="Spring Boot" target="_blank">Spring Boot</a></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Coding/">Coding</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Thinking/">Thinking</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Travelling/">Travelling</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/GitHub/" style="font-size: 15px;">GitHub</a> <a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/Java8/" style="font-size: 15px;">Java8</a> <a href="/tags/Https/" style="font-size: 15px;">Https</a> <a href="/tags/Cache/" style="font-size: 15px;">Cache</a> <a href="/tags/Alfred-Markdown/" style="font-size: 15px;">Alfred Markdown</a> <a href="/tags/AutoHotkey/" style="font-size: 15px;">AutoHotkey</a> <a href="/tags/Concurrent/" style="font-size: 15px;">Concurrent</a> <a href="/tags/并发/" style="font-size: 15px;">并发</a> <a href="/tags/Blog/" style="font-size: 15px;">Blog</a> <a href="/tags/Frontend/" style="font-size: 15px;">Frontend</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/AI/" style="font-size: 15px;">AI</a> <a href="/tags/Summary/" style="font-size: 15px;">Summary</a> <a href="/tags/Memory/" style="font-size: 15px;">Memory</a> <a href="/tags/Tools/" style="font-size: 15px;">Tools</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/Travelling/" style="font-size: 15px;">Travelling</a> <a href="/tags/Cookie/" style="font-size: 15px;">Cookie</a> <a href="/tags/Session/" style="font-size: 15px;">Session</a> <a href="/tags/Http/" style="font-size: 15px;">Http</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-bar-chart"> 访客统计</i></div><a href="https://s05.flagcounter.com/more/quj"><img src="https://s05.flagcounter.com/count2/quj/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_10/viewers_0/labels_1/pageviews_1/flags_0/percent_0/" alt="Since 2016.04.28" border="0" style="margin-top:15px;"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">墨言.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" href="https://jverson.com"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.1"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>